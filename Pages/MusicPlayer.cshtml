@page
@model RazorMusic.Pages.MusicPlayerModel
@{
    ViewData["Title"] = "Music Player";
}

<div class="music-player">
    <h1>Music Player</h1>

    <audio id="audioPlayer" controls>
        <source id="audioSource" src="/music/song1.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <div class="controls">
        <button onclick="playPrevious()">Previous</button>
        <button onclick="playNext()">Next</button>
    </div>
</div>

<script>
    const audioPlayer = document.getElementById('audioPlayer');
    const audioSource = document.getElementById('audioSource');
    let currentSongIndex = 1;
    const totalSongs = 3;

    function playNext() {
        currentSongIndex = (currentSongIndex % totalSongs) + 1;
        audioSource.src = `/music/song${currentSongIndex}.mp3`;
        audioPlayer.load();
        audioPlayer.play();
    }

    function playPrevious() {
        currentSongIndex = (currentSongIndex - 2 + totalSongs) % totalSongs + 1;
        audioSource.src = `/music/song${currentSongIndex}.mp3`;
        audioPlayer.load();
        audioPlayer.play();
    }
</script>